diff --git a/a/packages/opencode/src/cli/cmd/tui/thread.ts b/packages/opencode/src/cli/cmd/tui/thread.ts
index 66a22bf9..19bf30dd 100644
--- a/a/packages/opencode/src/cli/cmd/tui/thread.ts
+++ b/packages/opencode/src/cli/cmd/tui/thread.ts
@@ -2,6 +2,7 @@ import { cmd } from "@/cli/cmd/cmd"
 import { tui } from "./app"
 import { Rpc } from "@/util/rpc"
 import { type rpc } from "./worker"
+import { Server } from "../../../server/server"
 import { upgrade } from "@/cli/upgrade"
 import { Session } from "@/session"
 import { bootstrap } from "@/cli/bootstrap"
@@ -82,6 +83,28 @@ export const TuiThreadCommand = cmd({
         return undefined
       })()
 
+      if (typeof OPENCODE_TUI_PATH !== "undefined" && OPENCODE_TUI_PATH) {
+        const server = Server.listen({
+          port: 0,
+          hostname: "127.0.0.1",
+        })
+
+        const proc = Bun.spawn({
+          cmd: [OPENCODE_TUI_PATH],
+          cwd,
+          stdout: "inherit",
+          stderr: "inherit",
+          stdin: "inherit",
+          env: {
+            ...process.env,
+            OPENCODE_SERVER: server.url.toString(),
+          },
+          onExit: () => server.stop(),
+        })
+
+        await proc.exited
+        return
+      }
       const worker = new Worker("./src/cli/cmd/tui/worker.ts")
       worker.onerror = console.error
       const client = Rpc.client<typeof rpc>(worker)
